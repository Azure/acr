(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{453:function(e,t,r){"use strict";r.r(t);var n=r(65),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"quickstart-pull-images-from-a-connected-registry"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#quickstart-pull-images-from-a-connected-registry"}},[e._v("#")]),e._v(" Quickstart: Pull images from a connected registry")]),e._v(" "),r("p",[e._v("In this quickstart, you use "),r("RouterLink",{attrs:{to:"/preview/connected-registry/container-registry-intro.html"}},[e._v("Azure Container Registry")]),e._v(" commands to configure a client token for a connected registry and use this client token to pull images. You can review the "),r("RouterLink",{attrs:{to:"/preview/connected-registry/intro-connected-registry.html"}},[e._v("ACR connected registry introduction")]),e._v(" for details about the connected registry feature of Azure Container Registry.")],1),e._v(" "),r("h2",{attrs:{id:"prerequisites"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Use "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/cloud-shell/quickstart",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Cloud Shell"),r("OutboundLink")],1),e._v(" using the bash environment.")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://shell.azure.com/",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png",alt:"https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png"}}),r("OutboundLink")],1)])]),e._v(" "),r("li",[r("p",[e._v("If you prefer, "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("install"),r("OutboundLink")],1),e._v(" the Azure CLI to run CLI reference commands.")]),e._v(" "),r("ul",[r("li",[e._v("If you're using a local install, sign in with Azure CLI by using the "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index#az_login",target:"_blank",rel:"noopener noreferrer"}},[e._v("az login"),r("OutboundLink")],1),e._v(" command. To finish the authentication process, follow the steps displayed in your terminal. See "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sign in with Azure CLI"),r("OutboundLink")],1),e._v(" for additional sign-in options.")]),e._v(" "),r("li",[e._v("When you're prompted, install Azure CLI extensions on first use. For more information about extensions, see "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/azure-cli-extensions-overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("Use extensions with Azure CLI"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("li",[e._v("Run "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_version",target:"_blank",rel:"noopener noreferrer"}},[e._v("az version"),r("OutboundLink")],1),e._v(" to find the version and dependent libraries that are installed. To upgrade to the latest version, run "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_upgrade",target:"_blank",rel:"noopener noreferrer"}},[e._v("az upgrade"),r("OutboundLink")],1),e._v(".")])])]),e._v(" "),r("li",[r("p",[e._v("The Azure CLI commands in this article are formatted for the Bash shell. If you're using a different shell like PowerShell or Command Prompt, you may need to adjust line continuation characters or variable assignment lines accordingly. This article uses variables to minimize the amount of command editing required.")])])]),e._v(" "),r("h2",{attrs:{id:"before-you-begin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#before-you-begin"}},[e._v("#")]),e._v(" Before you begin")]),e._v(" "),r("p",[e._v("Make sure that you have created the connected registry resource in Azure as described in the "),r("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-connected-registry-cli.html"}},[e._v("Create connected registry using the CLI")]),e._v(" quickstart guide and have a connected registry deployed on your premises as described in "),r("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-deploy-connected-registry-iot-edge-cli.html"}},[e._v("Quickstart: Deploy a connected registry to an IoT Edge device")]),e._v(" or "),r("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-deploy-connected-registry-azure-arc.html"}},[e._v("Quickstart: Deploy a connected registry to an Azure Arc cluster")]),e._v(".")],1),e._v(" "),r("h2",{attrs:{id:"create-a-scope-map"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#create-a-scope-map"}},[e._v("#")]),e._v(" Create a scope map")]),e._v(" "),r("p",[e._v("Use the following CLI command to create a scope map for read access to the "),r("code",[e._v("hello-world")]),e._v(" repository:")]),e._v(" "),r("div",{staticClass:"language-azurecli line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('az acr scope-map create \\\n  --name hello-world-scopemap \\\n  --registry mycontainerregistry001 \\\n  --repository hello-world content/read \\\n  --description "Scope map for the connected registry."\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br")])]),r("h2",{attrs:{id:"create-a-client-token"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#create-a-client-token"}},[e._v("#")]),e._v(" Create a client token")]),e._v(" "),r("p",[e._v("Use the following CLI command to create a client token and associate it with the newly created scope map:")]),e._v(" "),r("div",{staticClass:"language-azurecli line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("az acr token create \\\n  --name myconnectedregistry-client-token \\\n  --registry mycontainerregistry001 \\\n  --scope-map hello-world-scopemap\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("p",[e._v("The command will return details about the newly generated token including passwords.")]),e._v(" "),r("blockquote",[r("p",[e._v("[!IMPORTANT]\nMake sure that you save the generated passwords. Those are one-time passwords and cannot be retrieved. You can generate new passwords using the "),r("a",{attrs:{href:"https://docs.microsoft.com/cli/azure/acr/token/credential?view=azure-cli-latest#az_acr_token_credential_generate",target:"_blank",rel:"noopener noreferrer"}},[e._v("az acr token credential generate"),r("OutboundLink")],1),e._v(" command.")])]),e._v(" "),r("h2",{attrs:{id:"update-the-connected-registry-with-the-client-token"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#update-the-connected-registry-with-the-client-token"}},[e._v("#")]),e._v(" Update the connected registry with the client token")]),e._v(" "),r("p",[e._v("Use the following CLI command to update the connected registry with the newly created client token:")]),e._v(" "),r("div",{staticClass:"language-azurecli line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("az acr connected-registry update \\\n  --name myconnectedregistry \\\n  --registry mycontainerregistry001 \\\n  --add-client-token myconnectedregistry-client-token\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("h2",{attrs:{id:"pull-an-image-from-the-connected-registry"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pull-an-image-from-the-connected-registry"}},[e._v("#")]),e._v(" Pull an image from the connected registry")]),e._v(" "),r("p",[e._v("From a machine with access to the connected registry instance, use the following command to sign into the connected registry:")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker login -u myconnectedregistry-client-token -p <use_the_password_for_the_token> <use_the_ip_address_of_the_connected_registry>\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("p",[e._v("Use the following command to pull the "),r("code",[e._v("hello-world")]),e._v(" image:")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker pull <use_the_ip_address_of_the_connected_registry>/hello-world\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("h2",{attrs:{id:"next-steps"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[e._v("#")]),e._v(" Next steps")]),e._v(" "),r("p",[e._v("In this quickstart, you learned how to configure a client token for the connected registry and pull a container image.")])])}),[],!1,null,null,null);t.default=a.exports}}]);