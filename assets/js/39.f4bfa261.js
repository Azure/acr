(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{472:function(t,e,s){"use strict";s.r(e);var n=s(65),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"quickstart-send-connected-registry-artifact-events-to-event-grid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quickstart-send-connected-registry-artifact-events-to-event-grid"}},[t._v("#")]),t._v(" Quickstart: Send connected registry artifact events to Event Grid")]),t._v(" "),s("p",[t._v("In this quickstart, you will learn how to configure Connected registry "),s("a",{attrs:{href:"https://docs.microsoft.com/azure/container-registry/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure Container Registry"),s("OutboundLink")],1),t._v(" to send artifact push and delete events to "),s("a",{attrs:{href:"(https://docs.microsoft.com/en-us/azure/event-grid/overview)"}},[t._v("Azure Event Grid")]),t._v(" for processing and notification. You can review the "),s("RouterLink",{attrs:{to:"/preview/connected-registry/intro-connected-registry.html"}},[t._v("ACR connected registry introduction")]),t._v(" for details about the connected registry feature of Azure Container Registry.")],1),t._v(" "),s("h2",{attrs:{id:"scenario-overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scenario-overview"}},[t._v("#")]),t._v(" Scenario overview")]),t._v(" "),s("p",[t._v("As described in the "),s("a",{attrs:{href:"https://docs.microsoft.com/azure/container-registry/",target:"_blank",rel:"noopener noreferrer"}},[t._v("introduction"),s("OutboundLink")],1),t._v(", the connected registry synchronizes artifacts from the parent and also allows local push and delete of the artifacts. We can configure the connected registry to notify via "),s("a",{attrs:{href:"(https://docs.microsoft.com/en-us/azure/event-grid/overview)"}},[t._v("Azure Event Grid")]),t._v(" whenever there is an update to the artifact. This will allow us to perform other actions based on the availability of the artifact on the connected registry.")]),t._v(" "),s("h2",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Use "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/cloud-shell/quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure Cloud Shell"),s("OutboundLink")],1),t._v(" using the bash environment.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://shell.azure.com/",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png",alt:"https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png"}}),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("If you prefer, "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("install"),s("OutboundLink")],1),t._v(" the Azure CLI to run CLI reference commands.")]),t._v(" "),s("ul",[s("li",[t._v("If you're using a local install, sign in with Azure CLI by using the "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index#az_login",target:"_blank",rel:"noopener noreferrer"}},[t._v("az login"),s("OutboundLink")],1),t._v(" command. To finish the authentication process, follow the steps displayed in your terminal. See "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in with Azure CLI"),s("OutboundLink")],1),t._v(" for additional sign-in options.")]),t._v(" "),s("li",[t._v("When you're prompted, install Azure CLI extensions on first use. For more information about extensions, see "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/azure-cli-extensions-overview",target:"_blank",rel:"noopener noreferrer"}},[t._v("Use extensions with Azure CLI"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("li",[t._v("Run "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_version",target:"_blank",rel:"noopener noreferrer"}},[t._v("az version"),s("OutboundLink")],1),t._v(" to find the version and dependent libraries that are installed. To upgrade to the latest version, run "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_upgrade",target:"_blank",rel:"noopener noreferrer"}},[t._v("az upgrade"),s("OutboundLink")],1),t._v(".")])])]),t._v(" "),s("li",[s("p",[t._v("The Azure CLI commands in this article are formatted for the Bash shell. If you're using a different shell like PowerShell or Command Prompt, you may need to adjust line continuation characters or variable assignment lines accordingly. This article uses variables to minimize the amount of command editing required.")])])]),t._v(" "),s("h2",{attrs:{id:"before-you-begin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#before-you-begin"}},[t._v("#")]),t._v(" Before you begin")]),t._v(" "),s("p",[t._v("Make sure that you have created the connected registry resource in Azure as described in the "),s("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-connected-registry-cli.html"}},[t._v("Create connected registry using the CLI")]),t._v(" quickstart guide and have a connected registry deployed on your premises as described in "),s("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-deploy-connected-registry-iot-edge-cli.html"}},[t._v("Quickstart: Deploy a connected registry to an IoT Edge device")]),t._v(" or "),s("RouterLink",{attrs:{to:"/preview/connected-registry/quickstart-deploy-connected-registry-kubernetes.html"}},[t._v("Quickstart: Deploy a connected registry to Kubernetes cluster")]),t._v(". The connected registry image that is deployed should be of version atleast 0.6.0")],1),t._v(" "),s("p",[t._v("Also, make sure you understand "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/event-grid/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure Event Grid"),s("OutboundLink")],1),t._v(" and have registered to use it. You should also have an event end point ready where you would like to send your events. You can check the quickstart to configure Azure Event Grid for Azure Container Registry events as shown in "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/container-registry/container-registry-event-grid-quickstart?toc=/azure/event-grid/toc.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("QuickStart: Container registry events on Event Grid"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Before proceeding, set the event end point and other Azure Container Registry information.")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("APP_ENDPOINT=<your-app-endpoint>\nACR_NAME=mycontainerregistry001\nACR_CONNECTED_REGISTRY_NAME=myconnectedregistry\nACR_REGISTRY_ID=$(az acr show --name $ACR_NAME --query id --output tsv)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("In this tutorial, we configure the connected registry to send artifact events like push and delete to Azure Event Grid in a two step process.")]),t._v(" "),s("ol",[s("li",[t._v("Configure connected registry to generate events on patterns of interest.")]),t._v(" "),s("li",[t._v("Configure Azure Event Grid to subscribe and filter for events generated by connected registry.")])]),t._v(" "),s("h2",{attrs:{id:"notification-events-generation-on-a-connected-registry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notification-events-generation-on-a-connected-registry"}},[t._v("#")]),t._v(" Notification Events Generation on a connected registry")]),t._v(" "),s("p",[t._v("Use the following CLI command to configure the connected registry to generate notifications for push and delete events on all artifacts")]),t._v(" "),s("div",{staticClass:"language-azurecli line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az acr connected-registry update -r $ACR_NAME\n  --name $ACR_CONNECTED_REGISTRY_NAME \\\n  --add-notifications *:*\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("If you are interested in generating events only for specific artifact patterns or specific actions, you can specify the patterns in the form shown below")]),t._v(" "),s("div",{staticClass:"language-azurecli line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az acr connected-registry update -r $ACR_NAME \\\n  --name $ACR_CONNECTED_REGISTRY_NAME \\\n  --add-notifications hello-world:* hello-world:1.0:delete \\\n  hello-world@sha256:92c7f9c92844bbbb5d0a101b22f7c2a7949e40f8ea90c8b3bc396879d95e899a:push \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("The pattern is of the format")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('artifact ":" action\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("where "),s("code",[t._v("artifact")]),t._v(" and "),s("code",[t._v("action")]),t._v(" are further defined as")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("artifact")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(' "'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v('" tag '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(' "@" digest '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(' "push" or "delete"\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("The wildcard "),s("code",[t._v("*")]),t._v(" should be used to cover all values on a section.")]),t._v(" "),s("p",[t._v("For example,")]),t._v(" "),s("ol",[s("li",[t._v("*ðŸ˜— - Notify all actions on all tags and digests on all artifacts on the connected registry")]),t._v(" "),s("li",[t._v("*ðŸ˜—ðŸ˜—- Notify all actions on all tags on all artifacts on the connected registry")]),t._v(" "),s("li",[t._v("*@*ðŸ˜—- Notify all actions on all digests on all artifacts on the connected registry")]),t._v(" "),s("li",[t._v("path/to/repo:* - Notify all actions on all artifacts on repository '/path/to/repo' on the connected registry")]),t._v(" "),s("li",[t._v("path/to/repo:myTag:* - Notify all actions on tag 'myTag' on repository '/path/to/repo' on the connected registry")]),t._v(" "),s("li",[t._v("path/to/repo@myDigest:delete - Notify only 'delete' action on digest 'myDigest' on repository '/path/to/repo' on the connected registry")]),t._v(" "),s("li",[t._v("path/to/repo/*:push - Notify only 'push' action on all artifacts on all repositories that match '/path/to/repo/*' on the connected registry")])]),t._v(" "),s("h2",{attrs:{id:"event-grid-subscription-and-filtering-connected-registry-events-on-event-grid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event-grid-subscription-and-filtering-connected-registry-events-on-event-grid"}},[t._v("#")]),t._v(" Event Grid Subscription and filtering Connected Registry Events on Event Grid")]),t._v(" "),s("p",[t._v("In this step, you will configure eventgrid to subscribe for events from connected registry. You can use the "),s("code",[t._v("--advanced-filter")]),t._v(" on event grid to filter out connected registry specific events. The connected registry events will align to the existing Azure Container Registry event types "),s("code",[t._v("Microsoft.ContainerRegistry.ImagePushed")]),t._v(" and "),s("code",[t._v("Microsoft.ContainerRegistry.ImageDeleted")]),t._v(".")]),t._v(" "),s("ol",[s("li",[t._v("To filter events from all connected registries")])]),t._v(" "),s("div",{staticClass:"language-azurecli line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az eventgrid event-subscription create \\\n  --name event-sub-acr \\\n  --source-resource-id $ACR_REGISTRY_ID \\\n  --endpoint $APP_ENDPOINT \\\n  --advanced-filter data.connectedregistry IsNotNull \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("To filter connected registry events based on connected registry name")])]),t._v(" "),s("div",{staticClass:"language-azurecli line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az eventgrid event-subscription create \\\n  --name event-sub-acr \\\n  --source-resource-id $ACR_REGISTRY_ID \\\n  --endpoint $APP_ENDPOINT \\\n  --advanced-filter data.connectedregistry IsNotNull \\\n  --advanced-filter data.connectedregistry.name StringIn $ACR_CONNECTED_REGISTRY_NAME\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("Whenever there is a push or delete on any artifact on the connected registry, you will see the events as shown below. The events might take multiples of sync interval time to appear on endpoint based on the depth of the connected registry heirarchy.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Microsoft.ContainerRegistry.ImagePushed")]),t._v(" event")])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"831e1650-001e-001b-66ab-eeb76e069631"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"topic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/subscriptions/<subscription-id>/resourceGroups/<resource-group-name>/providers/Microsoft.ContainerRegistry/registries/<registry-name>/connectedRegistries/<connected-registry-name>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"subject"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aci-helloworld:v1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"eventType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.ContainerRegistry.ImagePushed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"eventTime"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-04-25T21:39:47.6549614Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"31c51664-e5bd-416a-a5df-e5206bc47ed0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"timestamp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-04-25T21:39:47.276585742Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"action"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"push"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"target"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"mediaType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/vnd.docker.distribution.manifest.v2+json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"size"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3023")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"digest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sha256:213bbc182920ab41e18edc2001e06abcca6735d87782d9cef68abd83941cf0e5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"repository"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aci-helloworld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"tag"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"length"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3023")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"connectedregistry"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<connected-registry-name>"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"dataVersion"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"metadataVersion"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("ul",[s("li",[s("p",[s("code",[t._v("Microsoft.ContainerRegistry.ImageDeleted")]),t._v(" event")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"831e1650-001e-001b-66ab-eeb76e069631"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"topic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/subscriptions/<subscription-id>/resourceGroups/<resource-group- name>/providers/Microsoft.ContainerRegistry/registries/<registry-name>/connectedRegistries/<connected-registry-name>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"subject"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aci-helloworld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"eventType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.ContainerRegistry.ImageDeleted"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"eventTime"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-04-25T21:39:47.6549614Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"31c51664-e5bd-416a-a5df-e5206bc47ed0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"timestamp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-04-25T21:39:47.276585742Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"action"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"target"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"mediaType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/vnd.docker.distribution.manifest.v2+json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"digest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sha256:213bbc182920ab41e18edc2001e06abcca6735d87782d9cef68abd83941cf0e5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"repository"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aci-helloworld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"connectedregistry"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<connected-registry-name>"')]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"dataVersion"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"metadataVersion"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])])])]),t._v(" "),s("p",[t._v("Please note that, if you already have event subscriptions on event grid for the concerned Azure Container Registry and you later configure generation of events on connected registry using CLI, you will immediately start to see the new connected registry events on those existing event grid subscriptions.")])])}),[],!1,null,null,null);e.default=a.exports}}]);