(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{433:function(a,s,t){a.exports=t.p+"assets/img/oras-artifact-graph.71e84693.svg"},481:function(a,s,t){"use strict";t.r(s);var e=t(65),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"push-and-pull-supply-chain-artifacts-using-a-private-container-registry-in-azure-preview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-and-pull-supply-chain-artifacts-using-a-private-container-registry-in-azure-preview"}},[a._v("#")]),a._v(" Push and pull supply chain artifacts, using a private container registry in Azure (Preview)")]),a._v(" "),e("p",[a._v("Use an Azure container registry to store and manage a graph of artifacts, including signatures, software bill of materials, security scan results or other types.")]),a._v(" "),e("p",[e("img",{attrs:{src:t(433),alt:""}})]),a._v(" "),e("p",[a._v("To demonstrate this capability, this article shows how to use the "),e("a",{attrs:{href:"https://oras.land",target:"_blank",rel:"noopener noreferrer"}},[a._v("OCI Registry as Storage (ORAS)"),e("OutboundLink")],1),a._v(" tool to push and pull a graph of artifacts to an Azure container registry.")]),a._v(" "),e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[a._v("#")]),a._v(" Prerequisites")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Azure container registry")]),a._v(" - Create a container registry in your Azure subscription. During the preview of ORAS Artifacts support, the registry must be created in specific regsions.")]),a._v(" "),e("li",[e("strong",[a._v("ORAS CLI")]),a._v(" - The ORAS CLI enables push, discover, pull of artifacts to an ORAS Artifacts enabled registry.")]),a._v(" "),e("li",[e("strong",[a._v("Azure CLI")]),a._v(" - To create an identity, list and delete repositories, you need a local installation of the Azure CLI. Version 2.29.1 or later is recommended. Run "),e("code",[a._v("az --version")]),a._v("to find the version. If you need to install or upgrade, see "),e("a",{attrs:{href:"/cli/azure/install-azure-cli"}},[a._v("Install Azure CLI")]),a._v(".")]),a._v(" "),e("li",[e("strong",[a._v("Docker (optional)")]),a._v(" - To complete the walkthrough, a container image is referenced. You can use Docker installed locally to build and push a container image, or reference an existing container image. Docker provides packages that easily configure Docker on any "),e("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/",target:"_blank",rel:"noopener noreferrer"}},[a._v("macOS"),e("OutboundLink")],1),a._v(", "),e("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Windows"),e("OutboundLink")],1),a._v(", or "),e("a",{attrs:{href:"https://docs.docker.com/engine/installation/#supported-platforms",target:"_blank",rel:"noopener noreferrer"}},[a._v("Linux"),e("OutboundLink")],1),a._v(" system.")])]),a._v(" "),e("h2",{attrs:{id:"preview-limitations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preview-limitations"}},[a._v("#")]),a._v(" Preview limitations")]),a._v(" "),e("p",[a._v("ORAS Artifacts support is limited to the South Central US region, with Availability Zone support.")]),a._v(" "),e("ul",[e("li",[a._v("Geo-replicated registries will not replicate referenced artifacts to other regions. As additional regions support ORAS Artifacts, the referenced artifacts will be replicated.")])]),a._v(" "),e("h2",{attrs:{id:"oras-installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oras-installation"}},[a._v("#")]),a._v(" ORAS installation")]),a._v(" "),e("p",[a._v("Download and install a preview ORAS release for your operating system. See "),e("a",{attrs:{href:"https://oras.land/cli/",target:"_blank",rel:"noopener noreferrer"}},[a._v("ORAS Install instructions"),e("OutboundLink")],1),a._v(" for how to extract and install the file for your operating system, referencing an Alpha.1 preview build from the "),e("a",{attrs:{href:"https://github.com/oras-project/oras/releases/tag/v0.2.1-alpha.1",target:"_blank",rel:"noopener noreferrer"}},[a._v("ORAS GitHub repo"),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"configure-a-private-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-a-private-registry"}},[a._v("#")]),a._v(" Configure a private registry")]),a._v(" "),e("p",[a._v("Configure environment variables to easily copy/paste commands into your shell. The commands can be run in the "),e("a",{attrs:{href:"https://http://shell.azure.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Azure Cloud Shell"),e("OutboundLink")],1)]),a._v(" "),e("div",{staticClass:"language-console line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ACR_NAME=myregistry\nREGISTRY=$ACR_NAME.azurecr.io\nREPO=net-monitor\nTAG=v1\nIMAGE=$REGISTRY/${REPO}:$TAG\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h3",{attrs:{id:"create-a-resource-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-resource-group"}},[a._v("#")]),a._v(" Create a resource group")]),a._v(" "),e("p",[a._v("If needed, run the "),e("a",{attrs:{href:"/cli/azure/group#az_group_create"}},[a._v("az group create")]),a._v(" command to create a resource group for the registry.")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az group create --name $ACR_NAME --location southcentralus\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"create-oras-artifact-enabled-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-oras-artifact-enabled-registry"}},[a._v("#")]),a._v(" Create ORAS Artifact enabled registry")]),a._v(" "),e("p",[a._v("Preview support for ORAS Artifacts requires Zone Redundancy, which requires a Premium service tier, in the South Central US region. Run the "),e("a",{attrs:{href:"/cli/azure/acr#az_acr_create"}},[a._v("az acr create")]),a._v(" command to create an ORAS Artifacts enabled registry. See the "),e("code",[a._v("az acr create")]),a._v(" command help for more registry options.")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az acr create \\\n  --resource-group $ACR_NAME \\\n  --name $ACR_NAME \\\n  --zone-redundancy enabled \\\n  --sku Premium \\\n  --output jsonc\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[a._v("In the command output, note the "),e("code",[a._v("zoneRedundancy")]),a._v(" property for the registry. When enabled, the registry is zone redundant, and ORAS Artifact enabled:")]),a._v(" "),e("div",{staticClass:"language-JSON line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("..."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"zoneRedundancy"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Enabled"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h3",{attrs:{id:"sign-in-with-azure-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sign-in-with-azure-cli"}},[a._v("#")]),a._v(" Sign in with Azure CLI")]),a._v(" "),e("p",[e("a",{attrs:{href:"/cli/azure/authenticate-azure-cli"}},[a._v("Sign in")]),a._v(" to the Azure CLI with your identity to push and pull artifacts from the container registry.")]),a._v(" "),e("p",[a._v("Then, use the Azure CLI command "),e("a",{attrs:{href:"/cli/azure/acr#az_acr_login"}},[a._v("az acr login")]),a._v(" to access the registry.")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az login\naz acr login --name $ACR_NAME\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("blockquote",[e("p",[a._v("[!NOTE]\n"),e("code",[a._v("az acr login")]),a._v(" uses the Docker client to set an Azure Active Directory token in the "),e("code",[a._v("docker.config")]),a._v(" file. The Docker client must be installed and running to complete the individual authentication flow.")])]),a._v(" "),e("h2",{attrs:{id:"sign-in-with-oras"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sign-in-with-oras"}},[a._v("#")]),a._v(" Sign in with ORAS")]),a._v(" "),e("p",[a._v("This section shows options to sign into the registry. Choose the method appropriate for your environment.")]),a._v(" "),e("p",[a._v("Run  "),e("code",[a._v("oras login")]),a._v(" to authenticate with the registry. You may pass "),e("RouterLink",{attrs:{to:"/container-registry-authentication.html"}},[a._v("registry credentials")]),a._v(" appropriate for your scenario, such as service principal credentials, user identity, or a repository-scoped token (preview).")],1),a._v(" "),e("ul",[e("li",[e("p",[a._v("Authenticate with your "),e("a",{attrs:{href:"container-registry-authentication.md?tabs=azure-cli#individual-login-with-azure-ad"}},[a._v("individual Azure AD identity")]),a._v(" to use an AD token.")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USER_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"00000000-0000-0000-0000-000000000000"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("az acr login --name $ACR_NAME --expose-token --output tsv --query accessToken"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])])]),a._v(" "),e("li",[e("p",[a._v("Authenticate with a "),e("RouterLink",{attrs:{to:"/container-registry-repository-scoped-permissions.html"}},[a._v("repository scoped token")]),a._v(" (Preview) to use non-AD based tokens.")],1),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USER_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"oras-token"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("az acr token create -n $USER_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  -r $ACR_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  --repository $REPO content/write "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  --only-show-errors "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  --query "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"credentials.passwords[0].value"')]),a._v(" -o tsv"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])])]),a._v(" "),e("li",[e("p",[a._v("Authenticate with an Azure Active Directory "),e("RouterLink",{attrs:{to:"/container-registry-auth-service-principal.html#create-a-service-principal"}},[a._v("service principal with pull and push permissions")]),a._v(" (AcrPush role) to the registry.")],1),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SERVICE_PRINCIPAL_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"oras-sp"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ACR_REGISTRY_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("az acr show --name $ACR_NAME --query "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" --output tsv"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("az ad sp create-for-rbac --name $SERVICE_PRINCIPAL_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n          --scopes "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("$(")]),a._v("az acr show --name $ACR_NAME --query "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" --output tsv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           --role acrpush "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n          --query "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"password"')]),a._v(" --output tsv"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USER_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("az ad sp list --display-name $SERVICE_PRINCIPAL_NAME --query "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[].appId"')]),a._v(" --output tsv"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])])])]),a._v(" "),e("h3",{attrs:{id:"sign-in-with-oras-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sign-in-with-oras-2"}},[a._v("#")]),a._v(" Sign in with ORAS")]),a._v(" "),e("p",[a._v("Supply the credentials to "),e("code",[a._v("oras login")]),a._v(".")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras login "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --username "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$USER_NAME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --password "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$PASSWORD")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("To read the password from Stdin, use "),e("code",[a._v("--password-stdin")]),a._v(".")]),a._v(" "),e("h2",{attrs:{id:"push-a-container-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-a-container-image"}},[a._v("#")]),a._v(" Push a container image")]),a._v(" "),e("p",[a._v("This example associates a graph of artifacts to a container image. Build and push a container image, or reference an existing image in the private registry.")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build -t "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v(" https://github.com/wabbit-networks/net-monitor.git"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#main")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" push "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"create-a-sample-signature-to-the-container-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-sample-signature-to-the-container-image"}},[a._v("#")]),a._v(" Create a sample signature to the container image")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"artifact": "\'')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${IMAGE}")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'", "signature": "pat hancock"}\'')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" signature.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"push-a-signature-to-the-registry-as-a-reference-to-the-container-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-a-signature-to-the-registry-as-a-reference-to-the-container-image"}},[a._v("#")]),a._v(" Push a signature to the registry, as a reference to the container image")]),a._v(" "),e("p",[a._v("The ORAS command pushes the signature to a repository, referencing another artifact through the "),e("code",[a._v("subject")]),a._v(" parameter. The "),e("code",[a._v("--artifact-type")]),a._v(" provides for differentiating artifacts, similar to file extensions enable different file types. One or more files can be pushed by specifying "),e("code",[a._v("file:mediaType")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras push "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --artifact-type "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'signature/example'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --subject "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    ./signature.json:application/json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("For more information on oras push, see "),e("a",{attrs:{href:"https://oras.land/cli/1_pushing/",target:"_blank",rel:"noopener noreferrer"}},[a._v("ORAS documentation"),e("OutboundLink")],1),a._v(".")]),a._v(" "),e("h2",{attrs:{id:"push-a-multi-file-artifact-as-a-reference"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-a-multi-file-artifact-as-a-reference"}},[a._v("#")]),a._v(" Push a multi-file artifact as a reference")]),a._v(" "),e("p",[a._v("Create some documentation around an artifact")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Readme Content'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" readme.md\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Detailed Content'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" readme-details.md\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("Push the multi-file artifact as a reference")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras push "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --artifact-type "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'readme/example'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --subject "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    ./readme.md:application/markdown "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    ./readme-details.md:application/markdown\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h2",{attrs:{id:"discovering-artifact-references"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#discovering-artifact-references"}},[a._v("#")]),a._v(" Discovering artifact references")]),a._v(" "),e("p",[a._v("The ORAS Artifacts Specification defines a [referrers API][oras-artifacts-referrers] for discovering references to a "),e("code",[a._v("subject")]),a._v(" artifact. The "),e("code",[a._v("oras discover")]),a._v(" command can show the list of references to the container image.")]),a._v(" "),e("p",[a._v("Using "),e("code",[a._v("oras discover")]),a._v(", view the graph of artifacts now stored in the registry")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras discover -o tree "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("The output shows the beginning of a graph of artifacts, where the signature and docs are viewed as a children of the container image")]),a._v(" "),e("div",{staticClass:"language-output line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("myregistry.azurecr.io/net-monitor:v1\n├── signature/example\n│   └── sha256:555ea91f39e7fb30c06f3b7aa483663f067f2950dcb...\n└── readme/example\n    └── sha256:1a118663d1085e229ff1b2d4d89b5f6d67911f22e55...\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h2",{attrs:{id:"creating-a-deep-graphs-of-artifacts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-deep-graphs-of-artifacts"}},[a._v("#")]),a._v(" Creating a deep graphs of artifacts")]),a._v(" "),e("p",[a._v("The ORAS Artifacts specification enables deep graphs, enabling signed software bill of materials (SBoM) and other artifact types.")]),a._v(" "),e("h3",{attrs:{id:"create-a-sample-sbom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-sample-sbom"}},[a._v("#")]),a._v(" Create a sample SBoM")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"version": "0.0.0.0", "artifact": "\'')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${IMAGE}")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'", "contents": "good"}\'')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" sbom.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"push-a-sample-sbom-to-the-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-a-sample-sbom-to-the-registry"}},[a._v("#")]),a._v(" Push a sample SBoM to the registry")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras push "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --artifact-type "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'sbom/example'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --subject "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  ./sbom.json:application/json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h3",{attrs:{id:"sign-the-sbom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sign-the-sbom"}},[a._v("#")]),a._v(" Sign the SBoM")]),a._v(" "),e("p",[a._v("Artifacts that are pushed as references, typically do not have tags as they are considered part of the subject artifact. To push a signature to an artifact that is a child of another artifact, use the "),e("code",[a._v("oras discover")]),a._v(" with "),e("code",[a._v("--artifact-type")]),a._v(" filtering to find the digest.")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SBOM_DIGEST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("oras discover -o json "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                --artifact-type sbom/example "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                $IMAGE "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq -r "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('".references[0].digest"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("Create a signature of an SBoM")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"artifact": "\'')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${REPO}")]),a._v("@"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SBOM_DIGEST")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'", "signature": "pat hancock"}\'')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" sbom-signature.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"push-the-sbom-signature"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push-the-sbom-signature"}},[a._v("#")]),a._v(" Push the SBoM signature")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras push "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --artifact-type "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'signature/example'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --subject "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v("@"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SBOM_DIGEST")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  ./sbom-signature.json:application/json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h3",{attrs:{id:"view-the-graph"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-the-graph"}},[a._v("#")]),a._v(" View the graph")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras discover -o tree "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$IMAGE")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("Generates the following output:")]),a._v(" "),e("div",{staticClass:"language-output line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("myregistry.azurecr.io/net-monitor:v1\n├── signature/example\n│   └── sha256:555ea91f39e7fb30c06f3b7aa483663f067f2950dcb...\n├── readme/example\n│   └── sha256:1a118663d1085e229ff1b2d4d89b5f6d67911f22e55...\n└── sbom/example\n    └── sha256:4280eef9adb632b42cf200e7cd5a822a456a558e4f3142da6b...\n        └── signature/example\n            └── sha256:a31ab875d37eee1cca68dbb14b2009979d05594d44a075bdd7...\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])]),e("h2",{attrs:{id:"pull-the-docs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-the-docs"}},[a._v("#")]),a._v(" Pull the Docs")]),a._v(" "),e("p",[a._v("To pull a referenced type, the digest of reference is discovered with the "),e("code",[a._v("oras discover")]),a._v(" command")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DOC_DIGEST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("oras discover -o json "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n              --artifact-type "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'readme/example'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n              $IMAGE "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq -r "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('".references[0].digest"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h3",{attrs:{id:"create-a-clean-directory-for-downloading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-clean-directory-for-downloading"}},[a._v("#")]),a._v(" Create a clean directory for downloading")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" ./download\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"pull-the-docs-into-the-download-directory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-the-docs-into-the-download-directory"}},[a._v("#")]),a._v(" Pull the docs into the download directory")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("oras pull -a -o ./download "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REGISTRY")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REPO")]),a._v("@"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DOC_DIGEST")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"view-the-docs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-the-docs"}},[a._v("#")]),a._v(" View the docs")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" ./download\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"view-the-repository-and-tag-listing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-the-repository-and-tag-listing"}},[a._v("#")]),a._v(" View the repository and tag listing")]),a._v(" "),e("p",[a._v("ORAS Artifacts enables artifact graphs to be pushed, discovered, pulled and copied without having to assign tags. This enables a tag listing to focus on the artifacts users think about, as opposed to the signatures and SBoMs that are associated with the container images, helm charts and other artifacts.")]),a._v(" "),e("h3",{attrs:{id:"view-a-list-of-tags"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-a-list-of-tags"}},[a._v("#")]),a._v(" View a list of tags")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az acr repository show-tags \\\n  -n $ACR_NAME \\\n  --repository $REPO \\\n  -o jsonc\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h3",{attrs:{id:"view-a-list-of-manifests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-a-list-of-manifests"}},[a._v("#")]),a._v(" View a list of manifests")]),a._v(" "),e("p",[a._v("A repository can have a list of manifests that are both tagged and untagged")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az acr repository show-manifests \\\n  -n $ACR_NAME \\\n  --repository $REPO \\\n  --detail -o jsonc\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("Note the container image manifests have "),e("code",[a._v('"tags":')])]),a._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"architecture"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"amd64"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"changeableAttributes"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"deleteEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"listEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"readEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"writeEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"configMediaType"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"application/vnd.docker.container.image.v1+json"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"createdTime"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2021-11-12T00:18:54.5123449Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"digest"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sha256:a0fc570a245b09ed752c42d600ee3bb5b4f77bbd70d8898780b7ab4..."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"imageSize"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2814446")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lastUpdateTime"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2021-11-12T00:18:54.5123449Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"mediaType"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"application/vnd.docker.distribution.manifest.v2+json"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"os"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"linux"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"tags"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"v1"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br")])]),e("p",[a._v("The signature is untagged, but tracked as a "),e("code",[a._v("oras.artifact.manifest")]),a._v(" reference to the container image")]),a._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"changeableAttributes"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"deleteEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"listEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"readEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"writeEnabled"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"createdTime"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2021-11-12T00:19:10.987156Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"digest"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sha256:555ea91f39e7fb30c06f3b7aa483663f067f2950dcbcc0b0d..."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"imageSize"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("85")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lastUpdateTime"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2021-11-12T00:19:10.987156Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"mediaType"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"application/vnd.cncf.oras.artifact.manifest.v1+json"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br")])]),e("h2",{attrs:{id:"delete-all-artifacts-in-the-graph"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delete-all-artifacts-in-the-graph"}},[a._v("#")]),a._v(" Delete all artifacts in the graph")]),a._v(" "),e("p",[a._v("Support for the ORAS Artifacts specification enables deleting the graph of artifacts associated with the root artifact. Use the "),e("a",{attrs:{href:"/cli/azure/acr/repository#az_acr_repository_delete"}},[a._v("az acr repository delete")]),a._v(" command to delete the signature, SBoM and the signature of the SBoM.")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("az acr repository delete "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -n "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ACR_NAME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  -t "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${REPO}")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TAG")]),a._v(" -y\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h3",{attrs:{id:"view-the-remaining-manifests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-the-remaining-manifests"}},[a._v("#")]),a._v(" View the remaining manifests")]),a._v(" "),e("div",{staticClass:"language-azurecli line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("az acr repository show-manifests \\\n  -n $ACR_NAME \\\n  --repository $REPO \\\n  --detail -o jsonc\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h2",{attrs:{id:"next-steps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[a._v("#")]),a._v(" Next steps")]),a._v(" "),e("ul",[e("li",[a._v("Learn more about "),e("a",{attrs:{href:"https://oras.land",target:"_blank",rel:"noopener noreferrer"}},[a._v("the ORAS cli"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("Learn more about "),e("a",{attrs:{href:"https://github.com/oras-project/artifacts-spec/",target:"_blank",rel:"noopener noreferrer"}},[a._v("ORAS Artifacts"),e("OutboundLink")],1),a._v(" for how to push, discover, pull, copy a graph of supply chain artifacts")])])])}),[],!1,null,null,null);s.default=r.exports}}]);